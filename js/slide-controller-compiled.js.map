{
  "version": 3,
  "sources": [
    "slide-controller.js"
  ],
  "names": [],
  "mappings": "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",
  "file": "slide-controller-compiled.js",
  "sourcesContent": [
    "(function (window) {\n\n  var ORIGIN_ = location.protocol + '//' + location.host;\n\n  function SlideController() {\n    \"use strict\";\n    this.popup = null;\n    this.isPopup = window.opener;\n\n    if (this.setupDone()) {\n      window.addEventListener('message', this.onMessage_.bind(this), false);\n\n      // Close popups if we reload the main window.\n      window.addEventListener('beforeunload', function (e) {\n        if (this.popup) {\n          this.popup.close();\n        }\n      }.bind(this), false);\n    }\n  }\n\n  SlideController.PRESENTER_MODE_PARAM = 'presentme';\n\n  SlideController.prototype.setupDone = function () {\n    \"use strict\";\n    var params = location.search.substring(1).split('&').map(function (el) {\n      return el.split('=');\n    });\n\n    var presentMe = null;\n    for (var i = 0, param; param = params[i]; ++i) {\n      if (param[0].toLowerCase() == SlideController.PRESENTER_MODE_PARAM) {\n        presentMe = param[1] == 'true';\n        break;\n      }\n    }\n\n    if (presentMe !== null) {\n      localStorage.ENABLE_PRESENTOR_MODE = presentMe;\n      // TODO: use window.history.pushState to update URL instead of the redirect.\n      if (window.history.replaceState) {\n        window.history.replaceState({}, '', location.pathname);\n      } else {\n        location.replace(location.pathname);\n        return false;\n      }\n    }\n\n    var enablePresenterMode = localStorage.getItem('ENABLE_PRESENTOR_MODE');\n    if (enablePresenterMode && JSON.parse(enablePresenterMode)) {\n      // Only open popup from main deck. Don't want recursive popup opening!\n      if (!this.isPopup) {\n        var opts = 'menubar=no,location=yes,resizable=yes,scrollbars=no,status=no';\n        this.popup = window.open(location.href, 'mywindow', opts);\n\n        // Loading in the popup? Trigger the hotkey for turning presenter mode on.\n        this.popup.addEventListener('load', function (e) {\n          var evt = this.popup.document.createEvent('Event');\n          evt.initEvent('keydown', true, true);\n          evt.keyCode = 'P'.charCodeAt(0);\n          this.popup.document.dispatchEvent(evt);\n          // this.popup.document.body.classList.add('with-notes');\n          // document.body.classList.add('popup');\n        }.bind(this), false);\n      }\n    }\n\n    return true;\n  }\n\n  SlideController.prototype.onMessage_ = function (e) {\n    var data = e.data;\n\n    // Restrict messages to being from this origin. Allow local developmet\n    // from file:// though.\n    // TODO: It would be dope if FF implemented location.origin!\n    if (e.origin != ORIGIN_ && ORIGIN_.indexOf('file://') != 0) {\n      alert('Someone tried to postMessage from an unknown origin');\n      return;\n    }\n\n    // if (e.source.location.hostname != 'localhost') {\n    //   alert('Someone tried to postMessage from an unknown origin');\n    //   return;\n    // }\n\n    if ('keyCode' in data) {\n      var evt = document.createEvent('Event');\n      evt.initEvent('keydown', true, true);\n      evt.keyCode = data.keyCode;\n      document.dispatchEvent(evt);\n    }\n  };\n\n  SlideController.prototype.sendMsg = function (msg) {\n    // // Send message to popup window.\n    // if (this.popup) {\n    //   this.popup.postMessage(msg, ORIGIN_);\n    // }\n\n    // Send message to main window.\n    if (this.isPopup) {\n      // TODO: It would be dope if FF implemented location.origin.\n      window.opener.postMessage(msg, '*');\n    }\n  };\n\n  window.SlideController = SlideController;\n\n})(window);\n\n"
  ]
}